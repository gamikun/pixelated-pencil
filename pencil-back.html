<!doctype html>
<html>
<head>
  <title>Pixelated Pencil</title>
  <style type="text/css">
    canvas { background: #f0f0f0;}
  </style>
</head>
<body>
<canvas id="canvas" width="600" height="600"></canvas>
<script>

var PIXEL_SIZE = 32;
var canvas = document.getElementById('canvas');
var context = canvas.getContext('2d');

function drawPixel(x, y) {
  context.fillRect(
    x * PIXEL_SIZE,
    y * PIXEL_SIZE,
    PIXEL_SIZE,
    PIXEL_SIZE
  );
}

canvas.onmousedown = function(e) {
  canvas.onmousemove = motion;
  motion(e);
}

canvas.onmouseup = function() {
  canvas.onmousemove = null;
}

function motion(e) {
  drawPixel(
    Math.floor((e.clientX - canvas.offsetLeft) / PIXEL_SIZE),
    Math.floor((e.clientY - canvas.offsetTop) / PIXEL_SIZE)
  );
}

</script>
</body>
</html>